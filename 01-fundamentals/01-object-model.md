# 1.1 Git ê°ì²´ ëª¨ë¸ (Object Model)

**ë‚œì´ë„: â­â­**

> *"Gitì„ ì •ë§ ì´í•´í•˜ë ¤ë©´, Gitì´ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì €ì¥í•˜ëŠ”ì§€ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤"*

---

## ğŸ“‘ ëª©ì°¨

- [STEP 1: ë‚´ë¶€ ì›ë¦¬ ì´í•´í•˜ê¸°](#step-1-ë‚´ë¶€-ì›ë¦¬-ì´í•´í•˜ê¸°-)
- [STEP 2: ëª…ë ¹ì–´ ì™„ì „ ì •ë³µ](#step-2-ëª…ë ¹ì–´-ì™„ì „-ì •ë³µ-)
- [STEP 3: ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤ ë§ˆìŠ¤í„°](#step-3-ì‹¤ì „-ì‹œë‚˜ë¦¬ì˜¤-ë§ˆìŠ¤í„°-)
- [BONUS: ë¹ ë¥¸ ì°¸ì¡°](#bonus-ë¹ ë¥¸-ì°¸ì¡°-)

---

## STEP 1: ë‚´ë¶€ ì›ë¦¬ ì´í•´í•˜ê¸° ğŸ§ 

### ğŸ¯ ì™œ ê°ì²´ ëª¨ë¸ì„ ì•Œì•„ì•¼ í•˜ë‚˜?

**ì‹¤ì œ ê°œë°œ ì‹œë‚˜ë¦¬ì˜¤:**
```
ìƒí™©: ì‹¤ìˆ˜ë¡œ ì¤‘ìš”í•œ ì»¤ë°‹ì„ ì‚­ì œí–ˆë‹¤!
git reset --hard HEAD~10

íŒ€ì›: "ê·¸ ì»¤ë°‹ ë‚ ì•„ê°”ë„¤ìš”... ë³µêµ¬ ì•ˆ ë ê±¸ìš”?"
ë‹¹ì‹ : (ë‹¹í™©) "ì–´... ê·¸ëŸ°ê°€ìš”?"
```

**Git ê°ì²´ ëª¨ë¸ì„ ì´í•´í•˜ë©´:**
```bash
# ì•ˆì‹¬í•˜ê³  ë³µêµ¬ ê°€ëŠ¥!
git reflog  # ê°ì²´ëŠ” ì‹¤ì œë¡œ ì‚­ì œ ì•ˆ ë¨
git reset --hard abc123  # ë³µêµ¬ ì™„ë£Œ!
```

> ğŸ’¡ **í•µì‹¬:** Gitì€ íŒŒì¼ì„ ì§ì ‘ ì €ì¥í•˜ì§€ ì•Šê³  "ê°ì²´"ë¡œ ì €ì¥í•©ë‹ˆë‹¤. 
> ê°ì²´ë¥¼ ì´í•´í•˜ë©´ Gitì˜ ê±°ì˜ ëª¨ë“  ë™ì‘ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

---

### ğŸ“Œ Gitì˜ 4ê°€ì§€ ê°ì²´

Gitì€ ëª¨ë“  ê²ƒì„ **4ê°€ì§€ íƒ€ì…ì˜ ê°ì²´**ë¡œ ì €ì¥í•©ë‹ˆë‹¤:

| ê°ì²´ íƒ€ì… | ì—­í•  | ì €ì¥ ë‚´ìš© | ë¹„ìœ  |
|:---------|:-----|:---------|:-----|
| **Blob** | íŒŒì¼ ë‚´ìš© ì €ì¥ | íŒŒì¼ì˜ ì‹¤ì œ ë°ì´í„° | ğŸ“„ ë¬¸ì„œ ë‚´ìš© |
| **Tree** | ë””ë ‰í† ë¦¬ êµ¬ì¡° | íŒŒì¼ëª… + Blob ì°¸ì¡° | ğŸ“ í´ë” êµ¬ì¡° |
| **Commit** | ìŠ¤ëƒ…ìƒ· | Tree ì°¸ì¡° + ë©”íƒ€ë°ì´í„° | ğŸ“¸ ì‚¬ì§„ì²© |
| **Tag** | íŠ¹ì • ì»¤ë°‹ í‘œì‹œ | Commit ì°¸ì¡° + íƒœê·¸ ì •ë³´ | ğŸ·ï¸ ë¶ë§ˆí¬ |

---

### ğŸ” Git ë‚´ë¶€ì—ì„œ ì¼ì–´ë‚˜ëŠ” ì¼

#### **1ï¸âƒ£ Blob ê°ì²´ (Binary Large Object)**

**íŒŒì¼ ë‚´ìš©ì„ ì €ì¥í•˜ëŠ” ê°ì²´**

```bash
# hello.txt íŒŒì¼ ìƒì„±
echo "Hello, Git!" > hello.txt

# Gitì— ì¶”ê°€
git add hello.txt
```

**Git ë‚´ë¶€:**
```
.git/objects/
â””â”€â”€ 8d/
    â””â”€â”€ 0e41234f24b6da002d962a26c2495ea16a425f
```

**Blob êµ¬ì¡°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Blob Object    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Type: blob      â”‚
â”‚ Size: 12 bytes  â”‚
â”‚ Content:        â”‚
â”‚ "Hello, Git!"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> ğŸ’¡ **ì¤‘ìš”:** Blobì€ íŒŒì¼ëª…ì„ ëª¨ë¦…ë‹ˆë‹¤! ì˜¤ì§ ë‚´ìš©ë§Œ ì €ì¥í•©ë‹ˆë‹¤.

---

#### **2ï¸âƒ£ Tree ê°ì²´**

**ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ì €ì¥í•˜ëŠ” ê°ì²´**

```bash
# ë””ë ‰í† ë¦¬ êµ¬ì¡°
my-project/
â”œâ”€â”€ hello.txt (Hello, Git!)
â””â”€â”€ src/
    â””â”€â”€ main.java (public class Main...)
```

**Tree ê°ì²´:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tree Object            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 100644 blob 8d0e41... hello.txt  
â”‚ 040000 tree 4b825d... src        
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**src/ Tree ê°ì²´:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tree Object (src)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 100644 blob a1b2c3... main.java  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì‹œê°í™”:**
```
        Tree (root)
        /         \
    Blob          Tree (src)
  (hello.txt)        |
                  Blob
                (main.java)
```

---

#### **3ï¸âƒ£ Commit ê°ì²´**

**ìŠ¤ëƒ…ìƒ·ì„ ì €ì¥í•˜ëŠ” ê°ì²´**

```bash
git commit -m "Initial commit"
```

**Commit ê°ì²´:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Commit Object              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ tree 4b825d...              â”‚  â† Root Tree ì°¸ì¡°
â”‚ author John <john@email>    â”‚
â”‚ committer John <john@email> â”‚
â”‚ date 2025-01-01 10:00:00    â”‚
â”‚                             â”‚
â”‚ Initial commit              â”‚  â† ì»¤ë°‹ ë©”ì‹œì§€
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë‘ ë²ˆì§¸ ì»¤ë°‹:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Commit Object              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ tree 9f4d96...              â”‚
â”‚ parent abc123...            â”‚  â† ì´ì „ ì»¤ë°‹ ì°¸ì¡°!
â”‚ author John <john@email>    â”‚
â”‚                             â”‚
â”‚ Add feature                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì»¤ë°‹ ì²´ì¸:**
```
commit3 â†’ commit2 â†’ commit1
(ìµœì‹ )               (ìµœì´ˆ)
```

---

#### **4ï¸âƒ£ Tag ê°ì²´**

**íŠ¹ì • ì»¤ë°‹ì— ì´ë¦„í‘œë¥¼ ë¶™ì´ëŠ” ê°ì²´**

```bash
git tag -a v1.0 -m "Version 1.0"
```

**Annotated Tag ê°ì²´:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tag Object                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ object abc123...            â”‚  â† Commit ì°¸ì¡°
â”‚ type commit                 â”‚
â”‚ tag v1.0                    â”‚
â”‚ tagger John <john@email>    â”‚
â”‚                             â”‚
â”‚ Version 1.0                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ” SHA-1 í•´ì‹œì˜ ë¹„ë°€

**ëª¨ë“  ê°ì²´ëŠ” SHA-1 í•´ì‹œë¡œ ì‹ë³„ë©ë‹ˆë‹¤:**

```bash
# íŒŒì¼ ë‚´ìš©ìœ¼ë¡œ í•´ì‹œ ê³„ì‚°
echo "Hello, Git!" | git hash-object --stdin
# ì¶œë ¥: 8d0e41234f24b6da002d962a26c2495ea16a425f
```

**í•´ì‹œ ìƒì„± ì›ë¦¬:**
```
í•´ì‹œ = SHA-1(ê°ì²´ íƒ€ì… + í¬ê¸° + ë‚´ìš©)

ì˜ˆì‹œ:
"blob 12\0Hello, Git!" â†’ 8d0e41234f24b6da002d962a26c2495ea16a425f
```

**íŠ¹ì§•:**
- âœ… **ë‚´ìš©ì´ ê°™ìœ¼ë©´ í•´ì‹œë„ ê°™ìŒ** (ì¤‘ë³µ ì œê±°!)
- âœ… **ë‚´ìš©ì´ ë‹¤ë¥´ë©´ í•´ì‹œë„ ë‹¤ë¦„** (ë¬´ê²°ì„± ë³´ì¥!)
- âœ… **40ì 16ì§„ìˆ˜** (2^160 ê°€ì§€ = ê±°ì˜ ì¶©ëŒ ì—†ìŒ)

---

### ğŸ“‚ .git ë””ë ‰í† ë¦¬ ì™„ì „ ë¶„ì„

```
.git/
â”œâ”€â”€ HEAD                 â† í˜„ì¬ ë¸Œëœì¹˜ ì°¸ì¡°
â”œâ”€â”€ config               â† ë¡œì»¬ ì„¤ì •
â”œâ”€â”€ description          â† ì €ì¥ì†Œ ì„¤ëª…
â”œâ”€â”€ hooks/               â† Git Hooks ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ info/                â† ì „ì—­ exclude íŒ¨í„´
â”œâ”€â”€ objects/             â† ëª¨ë“  ê°ì²´ ì €ì¥ì†Œ â­â­â­
â”‚   â”œâ”€â”€ 8d/
â”‚   â”‚   â””â”€â”€ 0e41234f24b6da002d962a26c2495ea16a425f
â”‚   â”œâ”€â”€ pack/            â† ì••ì¶•ëœ ê°ì²´
â”‚   â””â”€â”€ info/            â† ê°ì²´ ì •ë³´
â”œâ”€â”€ refs/                â† ì°¸ì¡° (ë¸Œëœì¹˜, íƒœê·¸) â­â­â­
â”‚   â”œâ”€â”€ heads/           â† ë¡œì»¬ ë¸Œëœì¹˜
â”‚   â”‚   â””â”€â”€ main         â† main ë¸Œëœì¹˜ (ì»¤ë°‹ ID ì €ì¥)
â”‚   â”œâ”€â”€ remotes/         â† ì›ê²© ë¸Œëœì¹˜
â”‚   â””â”€â”€ tags/            â† íƒœê·¸
â”œâ”€â”€ logs/                â† Reflog (HEAD ì´ë™ ê¸°ë¡)
â””â”€â”€ index                â† Staging Area (ì¸ë±ìŠ¤) â­â­â­
```

**í•µì‹¬ 3ëŒ€ì¥:**
1. **objects/** - ëª¨ë“  ë°ì´í„°ê°€ ì—¬ê¸° ì €ì¥ë¨
2. **refs/** - ë¸Œëœì¹˜ì™€ íƒœê·¸ (ì»¤ë°‹ IDë¥¼ ê°€ë¦¬í‚´)
3. **index** - Staging Area (ë‹¤ìŒ ì»¤ë°‹ë  ë‚´ìš©)

---

## STEP 2: ëª…ë ¹ì–´ ì™„ì „ ì •ë³µ ğŸ’»

### ğŸ”§ ê°ì²´ íƒìƒ‰ ëª…ë ¹ì–´

#### **1ï¸âƒ£ `git cat-file` - ê°ì²´ ë‚´ìš© ë³´ê¸°**

**ê¸°ë³¸ ì‚¬ìš©ë²•:**
```bash
# ê°ì²´ íƒ€ì… í™•ì¸
git cat-file -t 8d0e41

# ê°ì²´ ë‚´ìš© ë³´ê¸°
git cat-file -p 8d0e41

# ê°ì²´ í¬ê¸° í™•ì¸
git cat-file -s 8d0e41
```

**ì‹¤ìŠµ:**
```bash
# ìµœì‹  ì»¤ë°‹ì˜ Hash ê°€ì ¸ì˜¤ê¸°
git log --oneline -1
# ì¶œë ¥: abc123 Initial commit

# ì»¤ë°‹ ê°ì²´ ë‚´ìš© ë³´ê¸°
git cat-file -p abc123
# tree 4b825d...
# author John Doe <john@email.com>
# committer John Doe <john@email.com>
# 
# Initial commit

# Tree ê°ì²´ ë³´ê¸°
git cat-file -p 4b825d
# 100644 blob 8d0e41... hello.txt
# 040000 tree 9f4d96... src

# Blob ê°ì²´ ë³´ê¸°
git cat-file -p 8d0e41
# Hello, Git!
```

---

#### **2ï¸âƒ£ `git hash-object` - ê°ì²´ ìƒì„±**

**íŒŒì¼ì„ ê°ì²´ë¡œ ì €ì¥:**
```bash
# í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
echo "Test content" > test.txt

# í•´ì‹œë§Œ ê³„ì‚° (ì €ì¥ ì•ˆ í•¨)
git hash-object test.txt
# ì¶œë ¥: 9a2c770...

# ê°ì²´ë¡œ ì €ì¥ (-w ì˜µì…˜)
git hash-object -w test.txt
# ì¶œë ¥: 9a2c770...

# ì €ì¥ í™•ì¸
ls .git/objects/9a/
# 2c770...
```

---

#### **3ï¸âƒ£ `git ls-tree` - Tree ê°ì²´ íƒìƒ‰**

```bash
# í˜„ì¬ ì»¤ë°‹ì˜ Tree ë³´ê¸°
git ls-tree HEAD

# ì¬ê·€ì ìœ¼ë¡œ ëª¨ë“  í•˜ìœ„ Tree ë³´ê¸°
git ls-tree -r HEAD

# ì´ë¦„ë§Œ ë³´ê¸°
git ls-tree --name-only HEAD

# Treeê¹Œì§€ í¬í•¨í•´ì„œ ë³´ê¸°
git ls-tree -r -t HEAD
```

---

#### **4ï¸âƒ£ `git rev-parse` - ì°¸ì¡°ë¥¼ í•´ì‹œë¡œ ë³€í™˜**

```bash
# HEADê°€ ê°€ë¦¬í‚¤ëŠ” ì»¤ë°‹ Hash
git rev-parse HEAD

# ë¸Œëœì¹˜ê°€ ê°€ë¦¬í‚¤ëŠ” ì»¤ë°‹ Hash
git rev-parse main

# íƒœê·¸ê°€ ê°€ë¦¬í‚¤ëŠ” ì»¤ë°‹ Hash
git rev-parse v1.0

# ìƒëŒ€ ì°¸ì¡°
git rev-parse HEAD~3
git rev-parse HEAD^2
```

---

### ğŸ“Š ëª…ë ¹ì–´ ë¹„êµí‘œ

| ëª…ë ¹ì–´ | ìš©ë„ | ì¶œë ¥ | ì˜ˆì‹œ |
|:------|:-----|:-----|:-----|
| `cat-file -t` | ê°ì²´ íƒ€ì… | blob/tree/commit/tag | `git cat-file -t abc123` |
| `cat-file -p` | ê°ì²´ ë‚´ìš© | ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” í˜•ì‹ | `git cat-file -p abc123` |
| `hash-object` | ê°ì²´ ìƒì„± | SHA-1 í•´ì‹œ | `git hash-object -w file.txt` |
| `ls-tree` | Tree íƒìƒ‰ | íŒŒì¼/ë””ë ‰í† ë¦¬ ëª©ë¡ | `git ls-tree HEAD` |
| `rev-parse` | ì°¸ì¡°â†’í•´ì‹œ | ì»¤ë°‹ í•´ì‹œ | `git rev-parse HEAD` |

---

### âš¡ ì‹¤í–‰ ê²°ê³¼ ì‹œê°í™”

**ëª…ë ¹ì–´ ì‹¤í–‰ ì „:**
```
Working Directory        Staging Area         Repository
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ hello.txt    â”‚        â”‚   (empty)    â”‚     â”‚   (empty)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**`git add hello.txt` ì‹¤í–‰ í›„:**
```
Working Directory        Staging Area              Repository
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ hello.txt    â”‚   â†’    â”‚ Blob: 8d0e41...   â”‚  â†  â”‚ Blob: 8d0e41 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ (hello.txt)       â”‚     â”‚ (in objects/)â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**`git commit -m "Add file"` ì‹¤í–‰ í›„:**
```
Repository

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Commit: abc123             â”‚
â”‚ â”œâ”€ tree: 4b825d            â”‚
â”‚ â”œâ”€ author: John            â”‚
â”‚ â””â”€ message: "Add file"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tree: 4b825d               â”‚
â”‚ â””â”€ blob 8d0e41 hello.txt   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blob: 8d0e41               â”‚
â”‚ Content: "Hello, Git!"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## STEP 3: ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤ ë§ˆìŠ¤í„° ğŸ”¥

### ğŸ’¼ Scenario 1: ê°ì²´ ì§ì ‘ ìƒì„±í•˜ê³  ì»¤ë°‹ ë§Œë“¤ê¸°

**ëª©í‘œ:** Git ëª…ë ¹ì–´ ì—†ì´ ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ ì»¤ë°‹ ìƒì„±

#### **Problem: Gitì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì§„ì§œ ì´í•´í•˜ê³  ì‹¶ë‹¤!**

#### **Solution: ìˆ˜ë™ìœ¼ë¡œ ê°ì²´ ìƒì„±**

```bash
# 1ï¸âƒ£ ë¹ˆ ì €ì¥ì†Œ ìƒì„±
mkdir manual-git && cd manual-git
git init

# 2ï¸âƒ£ Blob ê°ì²´ ìƒì„±
echo "My first blob" | git hash-object -w --stdin
# ì¶œë ¥: 7b57bd29ea8afbdeb9bdf583d0bb7c587a37df9c

# 3ï¸âƒ£ Tree ê°ì²´ ìƒì„± (ìˆ˜ë™)
# Tree í˜•ì‹: 100644 blob [hash] [filename]
printf "100644 blob 7b57bd29ea8afbdeb9bdf583d0bb7c587a37df9c\tREADME.md" | git mktree
# ì¶œë ¥: e3c5e6a8d1f7b2c9a3d4e5f6a7b8c9d0e1f2a3b4

# 4ï¸âƒ£ Commit ê°ì²´ ìƒì„± (ìˆ˜ë™)
# Commit í˜•ì‹:
# tree [tree-hash]
# author [name] <[email]> [timestamp] [timezone]
# committer [name] <[email]> [timestamp] [timezone]
# 
# [commit message]

cat > /tmp/commit-msg <<EOF
tree e3c5e6a8d1f7b2c9a3d4e5f6a7b8c9d0e1f2a3b4
author Manual Git <manual@example.com> 1640995200 +0900
committer Manual Git <manual@example.com> 1640995200 +0900

My first manual commit
EOF

# Commit ê°ì²´ ìƒì„±
git hash-object -t commit -w /tmp/commit-msg
# ì¶œë ¥: a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0

# 5ï¸âƒ£ ë¸Œëœì¹˜ë¥¼ ì´ ì»¤ë°‹ìœ¼ë¡œ ì„¤ì •
echo "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0" > .git/refs/heads/main

# 6ï¸âƒ£ HEADë¥¼ mainìœ¼ë¡œ ì„¤ì •
echo "ref: refs/heads/main" > .git/HEAD

# 7ï¸âƒ£ í™•ì¸
git log
# commit a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0
# Author: Manual Git <manual@example.com>
# Date:   Sat Jan 1 00:00:00 2022 +0900
# 
#     My first manual commit
```

**ë°°ìš´ ì :**
- âœ… Gitì€ ê·¸ëƒ¥ ê°ì²´ì™€ ì°¸ì¡°ì˜ ì¡°í•©!
- âœ… Commitì€ Treeë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°
- âœ… BranchëŠ” Commitì„ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°
- âœ… HEADëŠ” Branchë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°

---

### ğŸ’¼ Scenario 2: ì‚­ì œëœ íŒŒì¼ ë³µêµ¬í•˜ê¸°

**ëª©í‘œ:** ì‹¤ìˆ˜ë¡œ ì‚­ì œí•œ íŒŒì¼ì„ ê°ì²´ì—ì„œ ì§ì ‘ ë³µêµ¬

#### **Problem: íŒŒì¼ì„ ì‚­ì œí–ˆëŠ”ë° ì»¤ë°‹ ì•ˆ í–ˆë‹¤! ë³µêµ¬ ê°€ëŠ¥í• ê¹Œ?**

```bash
# 1ï¸âƒ£ íŒŒì¼ ìƒì„± ë° ì»¤ë°‹
echo "Important data" > important.txt
git add important.txt
git commit -m "Add important file"

# 2ï¸âƒ£ íŒŒì¼ ì‚­ì œ (ì‹¤ìˆ˜!)
rm important.txt

# 3ï¸âƒ£ Working Directory ë³µêµ¬ë„ ì•ˆ ë¨...
git restore important.txt  # ì‹¤íŒ¨! (stagedê°€ ì•„ë‹ˆì–´ì„œ)

# âŒ ì´ëŒ€ë¡œ ë?
```

#### **Solution: ê°ì²´ì—ì„œ ì§ì ‘ ë³µêµ¬!**

```bash
# 1ï¸âƒ£ ì»¤ë°‹ì—ì„œ Tree ì°¾ê¸°
git cat-file -p HEAD
# tree abc123...

# 2ï¸âƒ£ Treeì—ì„œ Blob ì°¾ê¸°
git cat-file -p abc123
# 100644 blob def456... important.txt

# 3ï¸âƒ£ Blob ë‚´ìš© í™•ì¸
git cat-file -p def456
# Important data

# 4ï¸âƒ£ íŒŒì¼ ë³µêµ¬!
git cat-file -p def456 > important.txt

# âœ… ë³µêµ¬ ì™„ë£Œ!
cat important.txt
# Important data
```

**ë” ê°„ë‹¨í•œ ë°©ë²•:**
```bash
# ìµœì‹  ì»¤ë°‹ì—ì„œ ë°”ë¡œ ë³µêµ¬
git restore --source=HEAD important.txt
```

---

### ğŸ’¼ Scenario 3: ê°™ì€ ë‚´ìš© íŒŒì¼ì˜ ì¤‘ë³µ ì œê±° í™•ì¸

**ëª©í‘œ:** Gitì´ ê°™ì€ ë‚´ìš©ì˜ íŒŒì¼ì„ ì¤‘ë³µ ì €ì¥ ì•ˆ í•˜ëŠ”ì§€ í™•ì¸

#### **Problem: ê°™ì€ íŒŒì¼ì„ 100ê°œ ë§Œë“¤ë©´ ìš©ëŸ‰ì´ 100ë°°?**

```bash
# 1ï¸âƒ£ ê°™ì€ ë‚´ìš©ì˜ íŒŒì¼ 100ê°œ ìƒì„±
for i in {1..100}; do
  echo "Same content" > file$i.txt
done

# 2ï¸âƒ£ Gitì— ì¶”ê°€
git add .

# 3ï¸âƒ£ ê°ì²´ ê°œìˆ˜ í™•ì¸
find .git/objects -type f | wc -l
# ì¶œë ¥: 1 (Blob í•˜ë‚˜ë§Œ!)

# 4ï¸âƒ£ Blob ë‚´ìš© í™•ì¸
git hash-object file1.txt
git hash-object file50.txt
git hash-object file100.txt
# ëª¨ë‘ ê°™ì€ Hash!

# 5ï¸âƒ£ ì»¤ë°‹ í›„ ìš©ëŸ‰ í™•ì¸
git commit -m "Add 100 files"
du -sh .git/objects
# ë§¤ìš° ì‘ì€ ìš©ëŸ‰! (ë‚´ìš©ì€ 1ê°œë§Œ ì €ì¥ë¨)
```

**ê²°ë¡ :**
- âœ… **ê°™ì€ ë‚´ìš© = ê°™ì€ Blob**
- âœ… **Treeë§Œ íŒŒì¼ëª… ì •ë³´ ì €ì¥**
- âœ… **ê·¹ë„ë¡œ íš¨ìœ¨ì ì¸ ì €ì¥ ë°©ì‹!**

---

### ğŸš¨ í•¨ì • & ì‹¤ìˆ˜ ë°©ì§€

#### âŒ **ì‹¤ìˆ˜ 1: Blobì€ íŒŒì¼ëª…ì„ ëª¨ë¥¸ë‹¤**

```bash
# ì˜ëª»ëœ ì´í•´
echo "content" > file1.txt
echo "content" > file2.txt
git add .

# "file1.txtì™€ file2.txtëŠ” ë‹¤ë¥¸ Blobì´ê² ì§€?"
# âŒ í‹€ë ¸ìŠµë‹ˆë‹¤!

# ì˜¬ë°”ë¥¸ ì´í•´
git hash-object file1.txt  # abc123...
git hash-object file2.txt  # abc123... (ê°™ìŒ!)

# âœ… ë‚´ìš©ì´ ê°™ìœ¼ë©´ ê°™ì€ Blob!
# Treeë§Œ ë‹¤ë¥¸ íŒŒì¼ëª…ìœ¼ë¡œ Blob ì°¸ì¡°
```

---

#### âŒ **ì‹¤ìˆ˜ 2: ê°ì²´ëŠ” ì ˆëŒ€ ìˆ˜ì • ì•ˆ ë¨**

```bash
# ì˜ëª»ëœ ìƒê°
git commit -m "Version 1"
# "ë‚˜ì¤‘ì— ì´ ì»¤ë°‹ ë‚´ìš© ë°”ê¾¸ë©´ ë˜ê² ì§€?"
# âŒ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤!

# ì˜¬ë°”ë¥¸ ì´í•´
# Commit ê°ì²´ëŠ” ë¶ˆë³€(Immutable)
# ë‚´ìš©ì´ ë°”ë€Œë©´ = ë‹¤ë¥¸ Hash = ë‹¤ë¥¸ ê°ì²´

# ì»¤ë°‹ ìˆ˜ì • = ìƒˆë¡œìš´ ì»¤ë°‹ ìƒì„±
git commit --amend
# ì´ì „ ì»¤ë°‹ ìˆ˜ì • âŒ
# ìƒˆ ì»¤ë°‹ ìƒì„± âœ… (Hashê°€ ë°”ë€œ)
```

---

#### âŒ **ì‹¤ìˆ˜ 3: ì‚­ì œí•´ë„ ì‹¤ì œë¡  ì•ˆ ì§€ì›Œì§**

```bash
# ì˜ëª»ëœ ìƒê°
git reset --hard HEAD~10
# "ì»¤ë°‹ 10ê°œ ì‚­ì œí–ˆìœ¼ë‹ˆ ìš©ëŸ‰ ì¤„ì–´ë“¤ê² ì§€?"
# âŒ ê°ì²´ëŠ” ì—¬ì „íˆ ì¡´ì¬!

# ì˜¬ë°”ë¥¸ ì´í•´
git reflog  # ì‚­ì œí•œ ì»¤ë°‹ ì—¬ì „íˆ ë³´ì„
ls .git/objects  # ê°ì²´ ì—¬ì „íˆ ì¡´ì¬

# ì§„ì§œ ì‚­ì œí•˜ë ¤ë©´
git gc --prune=now  # Garbage Collection ê°•ì œ ì‹¤í–‰
git reflog expire --expire=now --all
```

---

### ğŸ¯ ì‹¤ìŠµ ë¯¸ì…˜

#### **ë¯¸ì…˜ 1: ê°ì²´ íƒí—˜ê°€ ğŸ—ºï¸**

**ëª©í‘œ:** í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ê°ì²´ íƒìƒ‰

```bash
# 1. ì €ì¥ì†Œ ìƒì„± ë° íŒŒì¼ ì¶”ê°€
mkdir git-explorer && cd git-explorer
git init
echo "File 1" > file1.txt
mkdir src
echo "File 2" > src/file2.txt
git add .
git commit -m "Initial commit"

# 2. ë¯¸ì…˜: ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µí•˜ì„¸ìš”
# Q1. ì´ ëª‡ ê°œì˜ ê°ì²´ê°€ ìƒì„±ë˜ì—ˆë‚˜ìš”? (íŒíŠ¸: find .git/objects -type f)
# Q2. Blob ê°ì²´ëŠ” ëª‡ ê°œì¸ê°€ìš”?
# Q3. Tree ê°ì²´ëŠ” ëª‡ ê°œì¸ê°€ìš”? (íŒíŠ¸: root Tree + src Tree)
# Q4. Commit ê°ì²´ëŠ” ëª‡ ê°œì¸ê°€ìš”?
# Q5. Root Treeì˜ ë‚´ìš©ì„ ì¶œë ¥í•˜ì„¸ìš” (íŒíŠ¸: git cat-file -p HEAD)
```

<details>
<summary>ì •ë‹µ ë³´ê¸°</summary>

```bash
# Q1. ì´ ê°ì²´ ê°œìˆ˜
find .git/objects -type f | wc -l
# ë‹µ: 5ê°œ (Blob 2 + Tree 2 + Commit 1)

# Q2. Blob ê°œìˆ˜
# ë‹µ: 2ê°œ (file1.txt, file2.txt)

# Q3. Tree ê°œìˆ˜
# ë‹µ: 2ê°œ (root Tree, src Tree)

# Q4. Commit ê°œìˆ˜
# ë‹µ: 1ê°œ

# Q5. Root Tree ë‚´ìš©
git cat-file -p HEAD
# tree abc123...  â† ì´ Hash ë³µì‚¬
git cat-file -p abc123
# 100644 blob ... file1.txt
# 040000 tree ... src
```

</details>

---

#### **ë¯¸ì…˜ 2: ê°ì²´ í¬ë Œì‹ ğŸ”**

**ëª©í‘œ:** ì†ìƒëœ ì»¤ë°‹ ë³µêµ¬í•˜ê¸°

```bash
# 1. ìƒí™© ì„¤ì •
git init forensics && cd forensics
echo "Secret" > secret.txt
git add secret.txt
git commit -m "Add secret"

# ì»¤ë°‹ Hash ì €ì¥
COMMIT_HASH=$(git rev-parse HEAD)
echo $COMMIT_HASH  # abc123...

# 2. Branch ì‚­ì œ (ì‹¤ìˆ˜!)
git branch -D main  # âŒ ë¸Œëœì¹˜ ì‚­ì œ!

# 3. ë¯¸ì…˜: ì‚­ì œëœ ì»¤ë°‹ì„ ì°¾ì•„ì„œ ë³µêµ¬í•˜ì„¸ìš”
# íŒíŠ¸ 1: ê°ì²´ëŠ” ì—¬ì „íˆ ì¡´ì¬í•¨
# íŒíŠ¸ 2: git reflog ë˜ëŠ” ì§ì ‘ objects/ íƒìƒ‰
# íŒíŠ¸ 3: ë³µêµ¬ í›„ ìƒˆ ë¸Œëœì¹˜ ìƒì„±
```

<details>
<summary>í•´ê²° ë°©ë²•</summary>

```bash
# ë°©ë²• 1: reflog ì‚¬ìš©
git reflog  # ì‚­ì œëœ ì»¤ë°‹ Hash í™•ì¸
git branch main abc123  # ë¸Œëœì¹˜ ì¬ìƒì„±

# ë°©ë²• 2: objects/ ì§ì ‘ íƒìƒ‰
find .git/objects -type f  # ëª¨ë“  ê°ì²´ í™•ì¸
# .git/objects/ab/c123...
git cat-file -t abc123  # commitì¸ì§€ í™•ì¸
git cat-file -p abc123  # ë‚´ìš© í™•ì¸
git branch main abc123  # ë³µêµ¬!

# ë°©ë²• 3: fsck ì‚¬ìš©
git fsck --lost-found  # ê³ ì•„ ê°ì²´ ì°¾ê¸°
git branch main abc123
```

</details>

---

#### **ë¯¸ì…˜ 3: ì¤‘ë³µ ì œê±° ë§ˆìŠ¤í„° ğŸ¯**

**ëª©í‘œ:** Gitì˜ ì¤‘ë³µ ì œê±° íš¨ìœ¨ì„± í™•ì¸

```bash
# 1. í…ŒìŠ¤íŠ¸ ì €ì¥ì†Œ
mkdir dedup-test && cd dedup-test
git init

# 2. ë¯¸ì…˜: ë‹¤ìŒ ì‹¤í—˜ ìˆ˜í–‰
# - ê°™ì€ ë‚´ìš© íŒŒì¼ 1000ê°œ ìƒì„±
# - .git/objects ìš©ëŸ‰ í™•ì¸
# - ë‹¤ë¥¸ ë‚´ìš© íŒŒì¼ 1000ê°œ ìƒì„±
# - .git/objects ìš©ëŸ‰ ë‹¤ì‹œ í™•ì¸
# - ì°¨ì´ë¥¼ ì„¤ëª…í•˜ì„¸ìš”

# 3. ì½”ë“œ ì‘ì„± (Bash ìŠ¤í¬ë¦½íŠ¸)
```

<details>
<summary>í•´ê²° ë°©ë²•</summary>

```bash
# ê°™ì€ ë‚´ìš© íŒŒì¼ 1000ê°œ
for i in {1..1000}; do
  echo "Same content" > same_$i.txt
done
git add same_*.txt
git commit -m "Add 1000 same files"

du -sh .git/objects
# ì¶œë ¥: ì•½ 12KB (Blob 1ê°œ + Tree 1ê°œ + Commit 1ê°œ)

# ë‹¤ë¥¸ ë‚´ìš© íŒŒì¼ 1000ê°œ
for i in {1..1000}; do
  echo "Different content $i" > diff_$i.txt
done
git add diff_*.txt
git commit -m "Add 1000 different files"

du -sh .git/objects
# ì¶œë ¥: ì•½ 3MB (Blob 1000ê°œ + Tree + Commit)

# ê²°ë¡ :
# - ê°™ì€ ë‚´ìš©: Blob 1ê°œë§Œ ìƒì„± (ê·¹ë„ë¡œ íš¨ìœ¨ì !)
# - ë‹¤ë¥¸ ë‚´ìš©: Blob 1000ê°œ ìƒì„± (ì •ìƒ)
```

</details>

---

## BONUS: ë¹ ë¥¸ ì°¸ì¡° ğŸ“Œ

### ğŸ“‹ Cheat Sheet

```bash
# ê°ì²´ íƒ€ì… í™•ì¸
git cat-file -t <hash>

# ê°ì²´ ë‚´ìš© ë³´ê¸°
git cat-file -p <hash>

# íŒŒì¼ì„ ê°ì²´ë¡œ ì €ì¥
git hash-object -w <file>

# Tree ë‚´ìš© ë³´ê¸°
git ls-tree <tree-hash>
git ls-tree -r HEAD  # ì¬ê·€ì ìœ¼ë¡œ

# ì°¸ì¡°ë¥¼ Hashë¡œ ë³€í™˜
git rev-parse HEAD
git rev-parse main

# ê°ì²´ ê°œìˆ˜ í™•ì¸
find .git/objects -type f | wc -l

# ì €ì¥ì†Œ ìš©ëŸ‰ í™•ì¸
du -sh .git/objects
```

---

### ğŸ”— ê´€ë ¨ ë¬¸ì„œ ë§í¬

**ì´ì „ í•™ìŠµ:**
- ì—†ìŒ (ì²« ë²ˆì§¸ ë¬¸ì„œ)

**ë‹¤ìŒ í•™ìŠµ:**
- [1.2 Working Directory, Staging Area, Repository](./02-three-areas.md)
- [1.3 HEADì™€ ì°¸ì¡° (References)](./03-head-and-refs.md)

**ê³ ê¸‰ ì£¼ì œ:**
- [13.1 Git Log ê³ ê¸‰ ì˜µì…˜](../13-history/01-log-advanced.md)
- [14.1 GCì™€ Prune](../14-performance/01-gc-prune.md)

---

### ğŸ’¡ ì¶”ê°€ íŒ

#### **ìœ ìš©í•œ Alias**

```bash
# .gitconfigì— ì¶”ê°€
[alias]
  # ê°ì²´ íƒ€ì… ë³´ê¸°
  type = cat-file -t
  
  # ê°ì²´ ë‚´ìš© ë³´ê¸°
  dump = cat-file -p
  
  # Tree ë³´ê¸°
  tree = ls-tree -r HEAD
  
  # ê°ì²´ ê°œìˆ˜
  count-objects = !git count-objects -v
```

**ì‚¬ìš©:**
```bash
git type HEAD       # commit
git dump HEAD       # ì»¤ë°‹ ë‚´ìš©
git tree            # ì „ì²´ Tree
git count-objects   # í†µê³„
```

---

#### **ë””ë²„ê¹… íŒ**

```bash
# 1. ê°ì²´ ê²€ì¦
git fsck --full
# ì†ìƒëœ ê°ì²´ ì°¾ê¸°

# 2. ê°ì²´ ì •ë³´ ìƒì„¸ ë³´ê¸°
git verify-pack -v .git/objects/pack/*.idx
# Pack íŒŒì¼ ë‚´ìš© í™•ì¸

# 3. ì €ì¥ì†Œ ìµœì í™”
git gc --aggressive --prune=now
# ë¶ˆí•„ìš”í•œ ê°ì²´ ì •ë¦¬ + ì••ì¶•
```

---

### ğŸ“š ë” ê¹Šì´ ì•Œì•„ë³´ê¸°

**ì¶”ì²œ ìë£Œ:**
- [Pro Git - Git Internals](https://git-scm.com/book/en/v2/Git-Internals-Git-Objects)
- [Git Objects ê³µì‹ ë¬¸ì„œ](https://git-scm.com/book/en/v2/Git-Internals-Git-Objects)

**ë‹¤ìŒ ë‹¨ê³„:**
- ê°ì²´ ëª¨ë¸ ì´í•´ ì™„ë£Œ âœ…
- ë‹¤ìŒ: Working Directoryì™€ Staging Area ì´í•´
- ìµœì¢… ëª©í‘œ: Git ëª…ë ¹ì–´ê°€ ê°ì²´ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ì™„ë²½ ì´í•´

---

<div align="center">

**ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! Git ê°ì²´ ëª¨ë¸ì„ ì™„ì „íˆ ì´í•´í–ˆìŠµë‹ˆë‹¤!**

ì´ì œ Gitì˜ ê±°ì˜ ëª¨ë“  ë™ì‘ì„ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[â¬…ï¸ READMEë¡œ ëŒì•„ê°€ê¸°](../README.md) | [ë‹¤ìŒ: 3ê°€ì§€ ì˜ì—­ â¡ï¸](./02-three-areas.md)

</div>
